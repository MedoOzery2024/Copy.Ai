<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Copy.Ai โ ููุฎุต ุงููุณุชูุฏุงุช</title>
  <link rel="stylesheet" href="style.css">

  <!-- PDF.js + worker -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
  <script> if(window.pdfjsLib) pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js'; </script>

  <!-- Tesseract -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

  <!-- FileSaver -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">๐</div>
      <div class="title">Copy.Ai</div>
    </div>

    <div class="top-actions">
      <button id="themeToggle" title="ุชุจุฏูู ุงููุถุน">๐</button>
      <button id="historyBtn" title="ุงูุณุฌู">๐</button>
    </div>
  </header>

  <main class="container">

    <!-- LEFT -->
    <section class="left-col">
      <div class="card">
        <h3>1) ุฑูุน ููู PDF ุฃู ุตูุฑุฉ</h3>
        <input id="fileInput" type="file" accept="application/pdf,image/*" />
        <small class="hint">ุฃู ุงุณุชุฎุฏู ุงููุงููุฑุง ูุงูุชูุงุท ุตูุฑุฉ ูููุณุชูุฏ.</small>
      </div>

      <div class="card">
        <h3>2) ุงููุงููุฑุง (ุงุฎุชูุงุฑ)</h3>
        <button id="openCameraBtn">๐ท ุงูุชุญ ุงููุงููุฑุง</button>
        <div class="small">ุนูุฏ ุงูุถุบุท ุณูุธูุฑ ุฎูุงุฑ ุงุฎุชูุงุฑ ุงููุงููุฑุง: ุฃูุงููุฉ / ุฎูููุฉ.</div>
      </div>

      <div class="card">
        <h3>3) ุฅุนุฏุงุฏุงุช ุงูุชูุฎูุต</h3>

        <label>ูุบุฉ OCR / ุงูููุฎุต
          <select id="langSelect">
            <option value="ara">ุงูุนุฑุจูุฉ</option>
            <option value="eng">English</option>
            <option value="fra">Franรงais</option>
            <option value="spa">Espaรฑol</option>
            <option value="deu">Deutsch</option>
          </select>
        </label>

        <label>ุนุฏุฏ ุฌูู ุงูููุฎุต
          <input id="sentCount" type="number" min="1" max="20" value="5" />
        </label>

        <label class="ai-option">
          <input id="useAi" type="checkbox" /> ุงุณุชุฎุฏู ููุฎูุต ุงูุฐูุงุก ุงูุงุตุทูุงุนู (OpenAI)
        </label>

        <label id="apiKeyLabel" class="hidden">OpenAI API Key (sk-...):
          <input id="openaiKey" type="password" placeholder="ุถุน ููุชุงุญ OpenAI ููุง (ุงุฎุชูุงุฑู)" />
        </label>

        <div class="controls-row">
          <button id="summarizeBtn">โจ ุชูุฎูุต</button>
          <button id="clearBtn">๐งน ูุณุญ</button>
        </div>
      </div>

      <div class="card small muted">
        <strong>ููุงุญุธุงุช ุชุดุบูู:</strong>
        <ul>
          <li>ุงูุชูุงุท ุงููุงููุฑุง ูุนูู ุนูู HTTPS ุฃู localhost.</li>
          <li>ูู OpenAI: ูุถุน ุงูููุชุงุญ ูู ุงูุญูู ูุฌุนู ุงูุทูุจ ูุฎุฑุฌ ูู ุงููุชุตูุญ โ ุฃูุตุญ ุจูุถุน ููุชุงุญู ุนูู ุฎุงุฏู ูุณูุท.</li>
        </ul>
      </div>
    </section>

    <!-- RIGHT -->
    <section class="right-col">
      <div class="card">
        <h3>ูุนุงููุฉ ุงููุงููุฑุง</h3>
        <div id="cameraArea" class="camera-area hidden">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas" class="hidden"></canvas>
          <div class="camera-actions">
            <button id="captureBtn">๐ธ ุงูุชูุงุท</button>
            <button id="retakeBtn" class="hidden">๐ ุฅุนุงุฏุฉ ุงูุชูุงุท</button>
            <button id="downloadImageBtn" class="hidden">โฌ๏ธ ุชูุฒูู ุตูุฑุฉ</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>ุงููุต ุงููุณุชุฎุฑุฌ</h3>
        <textarea id="extractedText" placeholder="ุณูุธูุฑ ุงููุต ุงููุณุชุฎุฑุฌ ููุง..." readonly></textarea>
      </div>

      <div class="card">
        <h3>ุงูููุฎุต</h3>
        <div id="loader" class="loader hidden">โณ ุฌุงุฑู ุงููุนุงูุฌุฉ...</div>
        <div id="summary" class="summary">ูู ูุชู ุงูุชูุฎูุต ุจุนุฏ.</div>
        <div id="summaryMeta" class="meta hidden"></div>

        <div class="summary-actions hidden" id="summaryActions">
          <button id="copyBtn">๐ ูุณุฎ ุงูููุฎุต</button>
          <button id="downloadTxtBtn">โฌ๏ธ ุชุญููู TXT</button>
          <button id="downloadPdfBtn">โฌ๏ธ ุชุญููู PDF</button>
        </div>
      </div>

      <div class="card small">
        <h4>ุงูุณุฌู (History)</h4>
        <ul id="historyList" class="history-list"></ul>
      </div>
    </section>
  </main>

  <!-- Modal ูุงุฎุชูุงุฑ ุงููุงููุฑุง -->
  <div id="cameraModal" class="modal hidden">
    <div class="modal-inner">
      <h3>ุงุฎุชุฑ ุงููุงููุฑุง</h3>
      <div class="modal-row">
        <button class="chooseCamera" data-mode="user">๐ฑ ุฃูุงููุฉ (Front)</button>
        <button class="chooseCamera" data-mode="environment">๐ท ุฎูููุฉ (Back)</button>
      </div>
      <button id="closeModal" class="modal-close">ุฅูุบุงุก</button>
    </div>
  </div>

  <footer class="footer">ยฉ 2025 Copy.Ai</footer>

  <script src="script.js"></script>
</body>
</html>
